<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <base href="/">
  <title>Buy Coupon - Demo</title>
  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml">

  <!--
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&family=Forum&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body>
  <header class="header" data-header>
    <div class="container">
      <a href="/" class="logo">
        <img src="./assets/images/logo.svg" width="160" height="50" alt="Demo - Home">
      </a>
    </div>
  </header>
  <main>
    <article>
      <section class="section" aria-label="coupon">
        <div class="container" style="max-width:640px;margin:0 auto;">
          <div class="special-dish-content bg-black-10" style="padding:40px;border-radius:12px">
            <div style="text-align:center;margin-bottom:30px">
              <h2 class="headline-1 section-title" style="color:var(--gold-crayola);margin-bottom:10px">Buy Gift Coupon</h2>
              <p class="section-text">Pay €50, receive €55 value (10% bonus). Choose any amount.</p>
            </div>
          <div class="grid-list" style="grid-template-columns: repeat(4, minmax(0,1fr)); gap:12px; margin: 16px 0;">
            <button class="btn btn-secondary" data-quick-amount="10"><span class="text text-1">€10</span><span class="text text-2" aria-hidden="true">€10</span></button>
            <button class="btn btn-secondary" data-quick-amount="20"><span class="text text-1">€20</span><span class="text text-2" aria-hidden="true">€20</span></button>
            <button class="btn btn-secondary" data-quick-amount="50"><span class="text text-1">€50</span><span class="text text-2" aria-hidden="true">€50</span></button>
            <button class="btn btn-secondary" data-quick-amount="100"><span class="text text-1">€100</span><span class="text text-2" aria-hidden="true">€100</span></button>
          </div>
          <div class="input-wrapper" style="margin-top:12px;">
            <input id="gift-amount" type="number" min="10" step="5" placeholder="Custom amount (min €10)" class="input-field" />
          </div>
            <button id="gift-buy" class="btn btn-primary" style="width:100%;margin-top:16px">
              <span class="text text-1">Buy Now</span>
              <span class="text text-2" aria-hidden="true">Buy Now</span>
            </button>
          </div>
        </div>
      </section>
    </article>
  </main>
  <script src="./assets/js/script.js"></script>
  <script src="./assets/js/app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      document.querySelectorAll('[data-quick-amount]')?.forEach(function(b){
        b.addEventListener('click', function(){
          var v = this.getAttribute('data-quick-amount');
          var input = document.getElementById('gift-amount');
          if (input) {
            input.value = v;
            input.focus();
            updateBuyButtonText();
            console.log('Quick amount selected:', v);
          }
        });
      });

      // Update button text when input changes
      function updateBuyButtonText() {
        var input = document.getElementById('gift-amount');
        var btn = document.getElementById('gift-buy');
        if (input && btn && input.value) {
          var amount = parseFloat(input.value);
          var bonus = (amount * 0.10).toFixed(2);
          var total = (amount + parseFloat(bonus)).toFixed(2);
          btn.innerHTML = `<span class="text text-1">Buy €${amount} (Get €${total} total)</span><span class="text text-2" aria-hidden="true">Buy €${amount} (Get €${total} total)</span>`;
        } else if (btn) {
          btn.innerHTML = `<span class="text text-1">Buy Now</span><span class="text text-2" aria-hidden="true">Buy Now</span>`;
        }
      }

      // Also add event listener to the buy button to show current value
      document.getElementById('gift-buy')?.addEventListener('click', function() {
        var input = document.getElementById('gift-amount');
        if (input) {
          console.log('Buy button clicked, current amount:', input.value);
        }
        // Call the buyGiftCoupon function to actually process the purchase
        if (typeof buyGiftCoupon === 'function') {
          buyGiftCoupon();
        } else {
          console.error('buyGiftCoupon function not found');
        }
      });

      // Listen to input changes
      document.getElementById('gift-amount')?.addEventListener('input', updateBuyButtonText);
      document.getElementById('gift-amount')?.addEventListener('change', updateBuyButtonText);
    });
  </script>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>
</html>


